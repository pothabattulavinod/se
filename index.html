<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!-- JW Player script -->
    <script src="https://ssl.p.jwpcdn.com/player/v/8.22.0/jwplayer.js"></script>
    <!-- JW Player license key -->
    <script>jwplayer.key = 'EN7MpaKagehNwodFmcDG3/k/QCMXIo8qyzO5Fi+Bxq0=';</script>

    <style>
        body {
            margin: 0;
            overflow: hidden;
        }

        #player {
            width: 100% !important;
            height: 100% !important;
        }

        .jwplayer .jw-progress {
            background-color: #FF0000;
        }

        button:hover {
            background: #FF0000 !important;
        }

        .jw-icon-forward {
            background: url('https://www.kindpng.com/picc/b/79-797059_forward-icon-png.png') no-repeat center center;
            background-size: 100%;
        }

        /* Hide the reset option in the right-click menu */
        .jw-rightclick .jw-reset {
            display: none;
        }
    </style>
</head>

<body>

    <div id="player"></div>

    <script type="text/javascript">
        document.addEventListener("DOMContentLoaded", function () {
            var playerInstance = jwplayer("player");

            // Define multiple URLs for the same video
            var videoUrls = [
                { file: "https://linksshortner.xyz/AgADTg261903?&.MP4", label: "URL 1" },
                { file: "https://file-to-link-nx-b8f69ee9ae53.herokuapp.com/dl/66f80b2af72831b3553eeaf7?&.MP4", label: "URL 2" },
                { file: "https://www.tgxlink.workers.dev/dl/66f80b2d6bda1fcc340b9f4f?&.MP4", label: "URL 3" },
                { file: "https://www.tg-x-server4.workers.dev/v2/AgADTg47475?&.MP4", label: "URL 4" },
                { file: "https://tg-movies4u.tgmkvofcl.workers.dev/596451?hash=AgADTg&?.MP4", label: "URL 5" },
                { file: "https://go.springsfern.in/dl/839706/Saripodhaa%20Sanivaaram%20(2024)%20Telugu%20HQ%20HDRip%20-%201080p%20-%20HEVC%20.mkv&?.MP4", label: "URL 6" },
                { file: "https://go.springsfern.in/dl/839706?&.MP4", label: "URL 7" },
                { file: "https://get4me.koyeb.app/411322?&.MP4", label: "URL 8" },
                { file: "https://file-streamx-697cdb6409cc.herokuapp.com/178255?hash=AgADTg&m=1?hash=undefined?&.MP4", label: "URL 9" }
            ];

            var lastTimeKey = 'jwplayer-last-time';
            var lastUrlKey = 'jwplayer-last-url';

            // Function to get a random URL from the list
            function getRandomUrl() {
                const randomIndex = Math.floor(Math.random() * videoUrls.length);
                return videoUrls[randomIndex].file;
            }

            // Set up JW Player with a random URL
            function setupPlayer(url) {
                playerInstance.setup({
                    aspectratio: "16:9",
                    preload: 'auto',
                    primary: 'html5',
                    sources: [{ file: url }],
                    tracks: [
                        {
                            file: "https://raw.githubusercontent.com/pothabattulavinod/Ss/refs/heads/main/Saripodhaa%20Sanivaaram.vtt",
                            label: "English",
                            kind: "captions",
                            default: true
                        },
                        {
                            file: "https://linksshortner.xyz/AgAD5R301379?&.eac3",  // Telugu audio
                            label: "Telugu",
                            kind: "audio"
                        }
                    ],
                    captions: {
                        backgroundOpacity: 0,
                        edgeStyle: "raised"
                    },
                    width: '100%',
                    height: '100%',
                    controls: true,
                    displayPlaybackLabel: true,
                    advertising: {
                        client: "vast",
                        schedule: [
                            { offset: "pre", tag: "" }
                        ]
                    }
                });

                // Restore playback position after player is ready
                playerInstance.on('ready', function () {
                    var lastTime = localStorage.getItem(lastTimeKey);
                    if (lastTime) {
                        playerInstance.seek(parseFloat(lastTime));
                    }

                    playerInstance.addButton(
                        'https://www.kindpng.com/picc/b/79-797059_forward-icon-png.png',
                        'Forward 10 seconds',
                        function () {
                            playerInstance.seek(playerInstance.getPosition() + 10);
                        },
                        'forward10'
                    );
                });
            }

            // Save playback position and switch to a random URL
            function switchToRandomUrl() {
                var currentTime = playerInstance.getPosition();
                localStorage.setItem(lastTimeKey, currentTime);

                var randomUrl = getRandomUrl();
                localStorage.setItem(lastUrlKey, randomUrl);

                playerInstance.load([{ file: randomUrl }]);
                playerInstance.play();
            }

            // Restore the last URL and playback position on page load
            var lastUrl = localStorage.getItem(lastUrlKey);
            if (lastUrl) {
                setupPlayer(lastUrl);
            } else {
                setupPlayer(getRandomUrl());
            }

            // Save the current playback position when the video is paused
            playerInstance.on('pause', function () {
                var currentTime = playerInstance.getPosition();
                localStorage.setItem(lastTimeKey, currentTime);
            });

            // Reset the last playback position when the video is complete
            playerInstance.on('complete', function () {
                localStorage.setItem(lastTimeKey, 0);
            });

            // Handle player errors and try to load another random URL while saving playback
            playerInstance.on('error', function () {
                console.log("Error occurred, switching to a different random URL.");
                switchToRandomUrl();
            });

            // Android TV remote control support (keydown event)
            document.addEventListener("keydown", function (e) {
                switch (e.key) {
                    case "ArrowRight": // Seek forward
                    case "Right":       // Android TV compatibility
                        e.preventDefault(); // Prevent default action
                        playerInstance.seek(playerInstance.getPosition() + 10);
                        break;
                    case "ArrowLeft": // Seek backward
                    case "Left":       // Android TV compatibility
                        e.preventDefault();
                        playerInstance.seek(playerInstance.getPosition() - 10);
                        break;
                    case "ArrowUp": // Increase volume
                    case "Up":       // Android TV compatibility
                        e.preventDefault();
                        playerInstance.setVolume(Math.min(playerInstance.getVolume() + 10, 100));
                        break;
                    case "ArrowDown": // Decrease volume
                    case "Down":       // Android TV compatibility
                        e.preventDefault();
                        playerInstance.setVolume(Math.max(playerInstance.getVolume() - 10, 0));
                        break;
                    case "Enter": // Play/Pause toggle
                    case "OK":    // Android TV compatibility (OK button)
                    case " ":     // Spacebar, also used on some remotes
                        e.preventDefault();
                        if (playerInstance.getState() === "playing") {
                            playerInstance.pause();
                        } else {
                            playerInstance.play();
                        }
                        break;
                    default:
                        break;
                }
            });
        });
    </script>
</body>

</html>
